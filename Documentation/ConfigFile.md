## SwiftGen Configuration File

In order to avoid invoking SwiftGen manually multiple times — one for each type of input / for each subcommand — and having to remember each flag and parameter to pass every time, you can instead use a YAML configuration file to make it easier to configure SwiftGen.

Simply create a YAML file named `swiftgen.yml` (typically at the root of your repository) with the structure described below to specify the subcommands to use and their various paths and options to use.

Then when you run `swiftgen` without any subcommand or argument, it will look for a `swiftgen.yml` file in the current directory and use it to know which commands to run and with which arguments.

## Configuration File Format

The configuration file is a YAML file which looks like this:

```yaml
input_dir: Sources/Resources
output_dir: Sources/Generated/
strings:
  sources: Base.lproj/Localizable.strings
  templateName: structured-swift3
  output: strings.swift
  params:
    enumName: Loc
xcassets:
  - sources: Images.xcassets
    templateName: swift3
    output: assets-images.swift
  - sources:
      - Colors.xcassets
      - Images.xcassets
    templatePath: customswift3
    output: assets-all.swift
```

All relative paths specified in the configuration file (`input_dir`, `output_dir`, `sources`, `templatePath`, `output`) are relative to the configuration file itself. (Side note: we'd advise against using absolute paths — starting with `/` — in the configuration file)

Here's a quick description of all possible root keys. All of them are optional.

| Key | Description | Intended usage |
|-----|-------------|----------------|
| `input_dir` | If present, it is prepended to all input `sources` keys used in the rest of the configuration file | This is useful to avoid repeating any common subdirectory everywhere in each `sources` key, when all your sources are in subdirectories of a common parent folder. |
| `output_dir` | If present, it is prepended to all `output` keys used in the rest of the configuration file | This is useful if, like most people, you want all files generated by SwiftGen to be generated in a common directory like `Sources/Generated/` for example. |
| `colors` | Describe the parameters to run with the `colors` subcommand | See below for a detail of all the subkeys. |
| `fonts` | Describe the parameters to run with the `fonts` subcommand | See below for a detail of all the subkeys. |
| `storyboards` | Describe the parameters to run with the `storyboards` subcommand | See below for a detail of all the subkeys. |
| `strings` | Describe the parameters to run with the `strings` subcommand | See below for a detail of all the subkeys. |
| `xcassets` | Describe the parameters to run with the `xcassets` subcommand | See below for a detail of all the subkeys. |

Each key corresponding to a SwiftGen subcommands (`colors`, `fonts`, `storyboards`, `strings`, `xcassets`) expect the corresponding value to be:

* Either a dictionary with the keys describe below, if you want to invoke the corresponding SwiftGen subcommand only once (most common use case)
* Or an array of those dictionaries, in the less common case where you need to invoke that SwiftGen subcommand multiple times (for example to use one template with some input files and another template for other input files)

| Subkey | Type | Description |
|--------|------|-------------|
| `sources` | Path or Array of Paths | The file(s) to parse (e.g. the path to your assets catalog or `Localizable.strings` file etc). |
| `templateName` | String | The name of the template to use. If you provide a value for this, you shouldn't also provide a value for `templatePath`. |
| `templatePath` | Path | The path to the template to use. If you provide a value for this, you shouldn't also provide a value for `templateName`. |
| `output` | Path | The path of the output file to generate. _(Note: Any intermediate directory up to this file must already exist.)_ |
| `params` | Dictionary | Any optional parameter you want to pass to the template (similarly to `--param` in the CLI). |

Similarly to when you invoke each subcommand of SwiftGen manually:

* `sources` and `output` are mandatory.
* You must specify either `templateName` or `templatePath`, but not both, nor neither.
* `params` is optional.

## Using a different file

Running `swiftgen` without any subcommand or argument is actually a shortcut invocation which is equivalent to running `swiftgen config run`. If you need more control when using configuration file you can use some advanced features by using the real full `swiftgen config run` command to specify more options.

In particular you can:

* Ask to use a different config file — instead of the default `swiftgen.yml` — using the `--config` flag.

  ```sh
  swiftgen config run --config tools/swiftgen/swiftgen-config.yml
  ```
  
* Enable the verbose mode, which will print every command being executed when executing it, using the `--verbose` flag
  * This can allow you to control what is being run for logging what happens
  * This also allows you to know the equivalent command to type if you were to run each swiftgen command manually instead of using the config file — which can be useful if you need to debug or tweak a particular command in isolation for example

  ```sh
  swiftgen config run --verbose
  ```

## Linting the configuration file

You can also use `swiftgen config lint` to lint the configuration file. Without any additional option this will lint the default `swiftgen.yml` configuration file, but you can specify a different configuration file using the `--config` flag, similarly to `swiftgen config run`

`swiftgen config lint` will ensure that the YAML file is a valid YAML, that each mandatory key in the YAML is present, and that each key is of the expected type. It will print a descriptive error in case there's something wrong, and describe the interpretation of content of the configuration file if everything is valid.
